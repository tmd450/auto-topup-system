<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>ระบบเติมเงินอัตโนมัติ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/@zxing/library@latest"></script>
    <script src="https://unpkg.com/jsqr@1.4.0/dist/jsQR.js"></script>
</head>

<body>
    <div class="container mt-4">
        <h3>หากอยู่ในเกม (พ้อยต์) จะเข้าตัวทันที
            หากไม่ได้อยู่ในเกม ระบบก็จะให้พ้อยต์ไปในตัวเลย (สามารถเติมได้แบบ อยู่ในเกม และ ไม่อยู่ในเกม)
            ชื่อไม่ต้องเอา @ มานะครับ เช่น @piegamer146 เอาแค่ piegamer146 มาเท่านั้น !!</h3>
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">ตัวอย่างชื่อที่ถูกต้อง</h5>
                        <img src="https://img5.pic.in.th/file/secure-sv1/Untitled1cc1bd71a256158e.png"
                            alt="ตัวอย่างชื่อผู้เล่น" class="img-fluid mb-3 border rounded">
                        <p class="card-text text-muted">ตัวอย่าง: กรอกเฉพาะ "piegamer146" โดยไม่ต้องใส่ @</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <form id="slipForm">
                            <div class="mb-3">
                                <label for="usernameInput" class="form-label">ชื่อในเกม</label>
                                <input type="text" class="form-control" id="usernameInput"
                                    placeholder="กรุณาใส่ชื่อในเกม">
                            </div>
                            <div class="mb-3">
                                <label for="qrInput" class="form-label">อัพโหลดรูป QR Code</label>
                                <input type="file" class="form-control" id="qrInput" accept="image/*">
                            </div>
                            <div class="mb-3">
                                <canvas id="canvas" style="display:none;"></canvas>
                                <div id="processedImage" style="margin-top: 10px;">
                                    <img id="preview" style="max-width: 100%; display: none;" />
                                </div>
                                <div id="result" class="alert" style="display:none;"></div>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="confirm()">ยืนยัน</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const _0x573ee2=_0x2009;(function(_0x46c7e3,_0x35a0d3){const _0x18565a=_0x2009,_0x41d028=_0x46c7e3();while(!![]){try{const _0x2a76f7=-parseInt(_0x18565a(0x15b))/0x1+parseInt(_0x18565a(0x139))/0x2+-parseInt(_0x18565a(0x133))/0x3*(parseInt(_0x18565a(0x144))/0x4)+-parseInt(_0x18565a(0x146))/0x5*(parseInt(_0x18565a(0x150))/0x6)+parseInt(_0x18565a(0x15e))/0x7+-parseInt(_0x18565a(0x13e))/0x8+parseInt(_0x18565a(0x161))/0x9;if(_0x2a76f7===_0x35a0d3)break;else _0x41d028['push'](_0x41d028['shift']());}catch(_0xac4ed6){_0x41d028['push'](_0x41d028['shift']());}}}(_0x3de3,0xe8516));if(window['location'][_0x573ee2(0x15c)]!=_0x573ee2(0x15f))return;const codeReader=new ZXing[(_0x573ee2(0x163))]();let debounce=![];async function confirm(){const _0x2d5afa=_0x573ee2,_0x483fb2=document[_0x2d5afa(0x137)](_0x2d5afa(0x13f))[_0x2d5afa(0x156)],_0x4a9948=document[_0x2d5afa(0x137)]('qrInput'),_0x5a8b4d=document[_0x2d5afa(0x137)](_0x2d5afa(0x13a)),_0x599dba=document['getElementById']('preview');if(!_0x483fb2){alert(_0x2d5afa(0x164));return;}if(debounce){alert(_0x2d5afa(0x141));return;}if(!_0x4a9948[_0x2d5afa(0x168)]||!_0x4a9948['files'][0x0]){alert(_0x2d5afa(0x138));return;}debounce=!![];const _0x3679b3=_0x4a9948[_0x2d5afa(0x168)][0x0],_0x494aec=new FileReader();_0x494aec[_0x2d5afa(0x13d)]=async function(_0x5aec3a){const _0x539b7b=_0x2d5afa,_0xa1b0c8=new Image();_0xa1b0c8[_0x539b7b(0x13d)]=async function(){const _0x35ea5b=_0x539b7b;_0x599dba[_0x35ea5b(0x14f)]=_0x5aec3a[_0x35ea5b(0x140)][_0x35ea5b(0x13a)],_0x599dba[_0x35ea5b(0x14e)][_0x35ea5b(0x145)]=_0x35ea5b(0x14b);let _0x4aea8d=await tryMultipleReadingMethods(_0xa1b0c8);if(_0x4aea8d)try{const _0x3ed1af=await fetch(_0x35ea5b(0x167),{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON[_0x35ea5b(0x162)]({'url':'https://script.google.com/macros/s/AKfycbzIQYQnFAwu6fBtC-9DPZ4Kh3ITaExx5AzmdcQwEtd73H9i14TN_kJ4aMa9vf3Ky8Va/exec?qrData='+encodeURIComponent(_0x4aea8d)+_0x35ea5b(0x142)+encodeURIComponent(_0x483fb2),'options':{'method':'GET','headers':{'Content-Type':_0x35ea5b(0x169)}}})});if(!_0x3ed1af['ok'])throw new Error(_0x35ea5b(0x16c));const _0x4ca6a1=await _0x3ed1af[_0x35ea5b(0x15d)]();alert(_0x4ca6a1);}catch(_0x2dc5ff){console[_0x35ea5b(0x157)]('Fetch\x20error:',_0x2dc5ff),alert('เกิดข้อผิดพลาดในการส่งข้อมูล:\x20'+_0x2dc5ff['message']);}finally{debounce=![];}else alert(_0x35ea5b(0x14c)),debounce=![];},_0xa1b0c8[_0x539b7b(0x14f)]=_0x5aec3a['target'][_0x539b7b(0x13a)];},_0x494aec[_0x2d5afa(0x158)](_0x3679b3);}function _0x2009(_0x4730ab,_0x5b5dc4){const _0x3de3ac=_0x3de3();return _0x2009=function(_0x2009a0,_0x1fba26){_0x2009a0=_0x2009a0-0x133;let _0x3df4ea=_0x3de3ac[_0x2009a0];return _0x3df4ea;},_0x2009(_0x4730ab,_0x5b5dc4);}async function tryMultipleReadingMethods(_0x5db617){const _0x183bea=[{'scale':0x1,'brightness':0x0,'contrast':0x1},{'scale':1.5,'brightness':0x14,'contrast':1.2},{'scale':0x2,'brightness':-0x14,'contrast':1.4},{'scale':0.75,'brightness':0x28,'contrast':1.6},{'scale':0.5,'brightness':-0x28,'contrast':1.8}];for(let _0x57be94 of _0x183bea){const _0x534704=await tryJsQR(_0x5db617,_0x57be94);if(_0x534704)return _0x534704;const _0x1cbf7b=await tryZXing(_0x5db617,_0x57be94);if(_0x1cbf7b)return _0x1cbf7b;}return null;}async function tryJsQR(_0x3947d9,_0x5e64fe){const _0x18fa95=_0x573ee2,_0x32a8d7=document[_0x18fa95(0x137)](_0x18fa95(0x143)),_0xab185f=_0x32a8d7['getContext']('2d'),_0x16d167=_0x3947d9[_0x18fa95(0x149)]*_0x5e64fe['scale'],_0x26eb29=_0x3947d9[_0x18fa95(0x15a)]*_0x5e64fe[_0x18fa95(0x152)];_0x32a8d7[_0x18fa95(0x149)]=_0x16d167,_0x32a8d7['height']=_0x26eb29,_0xab185f[_0x18fa95(0x151)]=_0x18fa95(0x166)+(0x64+_0x5e64fe[_0x18fa95(0x148)])+_0x18fa95(0x14a)+_0x5e64fe[_0x18fa95(0x13b)]*0x64+'%)',_0xab185f[_0x18fa95(0x159)](_0x3947d9,0x0,0x0,_0x16d167,_0x26eb29),_0xab185f[_0x18fa95(0x151)]='none';const _0x1fba23=_0xab185f[_0x18fa95(0x16d)](0x0,0x0,_0x32a8d7['width'],_0x32a8d7[_0x18fa95(0x15a)]),_0x3c54a4=[_0x124821=>_0x124821,applyAdaptiveThreshold,applySharpening,applyGrayscaleAndThreshold];for(let _0x294518 of _0x3c54a4){const _0x5756ad=_0x294518(_0x1fba23[_0x18fa95(0x13c)][_0x18fa95(0x165)]());try{const _0x1f81a6=jsQR(_0x5756ad,_0x1fba23[_0x18fa95(0x149)],_0x1fba23[_0x18fa95(0x15a)],{'inversionAttempts':_0x18fa95(0x16a)});if(_0x1f81a6)return _0x1f81a6[_0x18fa95(0x13c)];}catch(_0x523468){console[_0x18fa95(0x157)](_0x18fa95(0x16b),_0x523468);}}return null;}async function tryZXing(_0x43f7ce,_0xc25e9b){const _0x4a3d31=_0x573ee2;try{const _0x4b4af3=document['getElementById'](_0x4a3d31(0x143)),_0x56fc19=_0x4b4af3[_0x4a3d31(0x135)]('2d');_0x4b4af3[_0x4a3d31(0x149)]=_0x43f7ce[_0x4a3d31(0x149)]*_0xc25e9b[_0x4a3d31(0x152)],_0x4b4af3[_0x4a3d31(0x15a)]=_0x43f7ce['height']*_0xc25e9b[_0x4a3d31(0x152)],_0x56fc19[_0x4a3d31(0x151)]=_0x4a3d31(0x166)+(0x64+_0xc25e9b[_0x4a3d31(0x148)])+_0x4a3d31(0x14a)+_0xc25e9b[_0x4a3d31(0x13b)]*0x64+'%)',_0x56fc19[_0x4a3d31(0x159)](_0x43f7ce,0x0,0x0,_0x4b4af3[_0x4a3d31(0x149)],_0x4b4af3['height']),_0x56fc19['filter']=_0x4a3d31(0x154);const _0x570ffb=await new Promise(_0x2afec0=>_0x4b4af3['toBlob'](_0x2afec0,'image/png')),_0x29a92e=URL[_0x4a3d31(0x136)](_0x570ffb),_0x2d7f6c=await codeReader[_0x4a3d31(0x153)](undefined,_0x29a92e);URL[_0x4a3d31(0x160)](_0x29a92e);if(_0x2d7f6c)return _0x2d7f6c['text'];}catch(_0x3bbf38){console[_0x4a3d31(0x157)]('ZXing\x20error:',_0x3bbf38);}return null;}function applyAdaptiveThreshold(_0x33545d){const _0x4ad1aa=_0x573ee2,_0x7f9f90=0xb,_0x4cde5c=new Uint8ClampedArray(_0x33545d[_0x4ad1aa(0x155)]);for(let _0x2bdadc=0x0;_0x2bdadc<_0x33545d[_0x4ad1aa(0x155)];_0x2bdadc+=0x4){const _0x40fa3c=(_0x33545d[_0x2bdadc]+_0x33545d[_0x2bdadc+0x1]+_0x33545d[_0x2bdadc+0x2])/0x3,_0x51f21f=getLocalThreshold(_0x33545d,_0x2bdadc,_0x7f9f90),_0x118101=_0x40fa3c<_0x51f21f?0x0:0xff;_0x4cde5c[_0x2bdadc]=_0x4cde5c[_0x2bdadc+0x1]=_0x4cde5c[_0x2bdadc+0x2]=_0x118101,_0x4cde5c[_0x2bdadc+0x3]=0xff;}return _0x4cde5c;}function getLocalThreshold(_0x479afe,_0x49b170,_0x2cdd64){const _0x2dfa08=_0x573ee2;let _0x4441eb=0x0,_0x5c35a2=0x0;for(let _0x2695ac=Math['max'](0x0,_0x49b170-_0x2cdd64*0x4);_0x2695ac<Math[_0x2dfa08(0x147)](_0x479afe[_0x2dfa08(0x155)],_0x49b170+_0x2cdd64*0x4);_0x2695ac+=0x4){_0x4441eb+=(_0x479afe[_0x2695ac]+_0x479afe[_0x2695ac+0x1]+_0x479afe[_0x2695ac+0x2])/0x3,_0x5c35a2++;}return _0x4441eb/_0x5c35a2;}function applySharpening(_0x269db9){const _0x3ebe02=_0x573ee2,_0x2f1fde=new Uint8ClampedArray(_0x269db9[_0x3ebe02(0x155)]),_0x3db9a1=[-0x1,-0x1,-0x1,-0x1,0x9,-0x1,-0x1,-0x1,-0x1];for(let _0x13b6c6=0x0;_0x13b6c6<_0x269db9[_0x3ebe02(0x155)];_0x13b6c6+=0x4){let _0x1d3738=0x0,_0x47dc57=0x0,_0x3015d3=0x0;for(let _0x3cfdcf=0x0;_0x3cfdcf<0x9;_0x3cfdcf++){const _0x2b4a0d=_0x13b6c6+(Math[_0x3ebe02(0x14d)](_0x3cfdcf/0x3)-0x1)*0x4+(_0x3cfdcf%0x3-0x1)*0x4;_0x2b4a0d>=0x0&&_0x2b4a0d<_0x269db9['length']&&(_0x1d3738+=_0x269db9[_0x2b4a0d]*_0x3db9a1[_0x3cfdcf],_0x47dc57+=_0x269db9[_0x2b4a0d+0x1]*_0x3db9a1[_0x3cfdcf],_0x3015d3+=_0x269db9[_0x2b4a0d+0x2]*_0x3db9a1[_0x3cfdcf]);}_0x2f1fde[_0x13b6c6]=Math[_0x3ebe02(0x134)](0x0,Math[_0x3ebe02(0x147)](0xff,_0x1d3738)),_0x2f1fde[_0x13b6c6+0x1]=Math['max'](0x0,Math['min'](0xff,_0x47dc57)),_0x2f1fde[_0x13b6c6+0x2]=Math[_0x3ebe02(0x134)](0x0,Math[_0x3ebe02(0x147)](0xff,_0x3015d3)),_0x2f1fde[_0x13b6c6+0x3]=0xff;}return _0x2f1fde;}function applyGrayscaleAndThreshold(_0x2ceca9){const _0x5daaf8=_0x573ee2,_0x2e423e=new Uint8ClampedArray(_0x2ceca9[_0x5daaf8(0x155)]);for(let _0x53a8e7=0x0;_0x53a8e7<_0x2ceca9['length'];_0x53a8e7+=0x4){const _0xda6dbd=(_0x2ceca9[_0x53a8e7]+_0x2ceca9[_0x53a8e7+0x1]+_0x2ceca9[_0x53a8e7+0x2])/0x3;_0x2e423e[_0x53a8e7]=_0x2e423e[_0x53a8e7+0x1]=_0x2e423e[_0x53a8e7+0x2]=_0xda6dbd<0x80?0x0:0xff,_0x2e423e[_0x53a8e7+0x3]=0xff;}return _0x2e423e;}function _0x3de3(){const _0x299911=['filter','scale','decodeFromImage','none','length','value','error','readAsDataURL','drawImage','height','483631WSMwkg','origin','text','3093804vvUOub','https://tmd450.github.io/','revokeObjectURL','37744758kwtwTe','stringify','BrowserQRCodeReader','กรุณาใส่ชื่อในเกมก่อน','slice','brightness(','https://topup-api.replit.app/proxy','files','application/json','attemptBoth','jsQR\x20error:','Network\x20response\x20was\x20not\x20ok','getImageData','6pVcvsW','max','getContext','createObjectURL','getElementById','กรุณาเลือกรูปภาพ\x20QR\x20Code','918634GSEbuR','result','contrast','data','onload','12375264mfELKg','usernameInput','target','รอสักครู่\x20ระบบกำลังทำรายการ!','&username=','canvas','2231236yrUPwl','display','50Owkfsz','min','brightness','width','%)\x20contrast(','block','ไม่พบ\x20QR\x20Code\x20ในรูปภาพ\x20กรุณาลองภาพอื่น','floor','style','src','598452EgDiHF'];_0x3de3=function(){return _0x299911;};return _0x3de3();}
    </script>
</body>

</html>
